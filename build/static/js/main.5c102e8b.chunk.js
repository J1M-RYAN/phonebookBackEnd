(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{13:function(e,n,t){},16:function(e,n,t){e.exports=t(38)},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(14),o=t.n(l),c=t(15),u=t(2),i=function(e){var n=e.text;return r.a.createElement("h1",null,n)},m=function(e){var n=e.id,t=e.name,a=e.number;return r.a.createElement("span",{key:n},t," ",a)},s=t(3),d=t.n(s),f="https://limitless-temple-04524.herokuapp.com/api/persons",p=function(){return d.a.get(f)},b=function(e){return d.a.post(f,e)},E=function(e,n){return d.a.put("".concat(f,"/").concat(e),n)},h=function(e,n){if(window.confirm("Do you really want to delete ".concat(n,"?")))return console.log("person",e,"is removed"),d.a.delete("".concat(f,"/").concat(e))},g=function(e){var n=Object(a.useState)(!1),t=Object(u.a)(n,2),l=t[0],o=t[1],c=e.persons,i=e.filterWord;l&&(console.log("happened because update is true"),p().then((function(e){c=e.data})),o(!1),console.log("persons",c));var s=function(e,n,t){console.log("I deleted",n,"whos id is",e),console.log("persons type is",typeof c),c=c.filter((function(n){return n.id!==e})),console.log("persons",c),h(e,n),o(!0)};if(""===i)return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Numbers"),c.map((function(n,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m,{key:t,name:n.name,number:n.number,id:n.id,result:t,persons:e.persons}),r.a.createElement("button",{key:t,onClick:function(){return s(n.id,n.name)}},"delete"),r.a.createElement("br",null))})));for(var d=[],f=0;f<c.length;f++)c[f].name.includes(i)&&(d=d.concat({name:c[f].name,number:c[f].number,id:c[f].id}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Numbers"),d.map((function(n,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m,{key:t,name:n.name,number:n.number,id:n.id,result:t,persons:e.persons}),r.a.createElement("button",{key:t,onClick:function(){return s(n.id,n.name)}},"delete"),r.a.createElement("br",null))})))},v=(t(13),function(e){var n=e.message;return console.log(n),null===n?null:"l"===n.charAt(1)?r.a.createElement("li",{className:"deleted"},n):r.a.createElement("li",{className:"personAdded"},n)}),k=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],l=n[1],o=Object(a.useState)(""),m=Object(u.a)(o,2),s=m[0],d=m[1],f=Object(a.useState)(""),h=Object(u.a)(f,2),k=h[0],j=h[1],y=Object(a.useState)(""),O=Object(u.a)(y,2),w=O[0],C=O[1],S=Object(a.useState)(null),A=Object(u.a)(S,2),F=A[0],N=A[1];setTimeout((function(){N(null)}),5e3),Object(a.useEffect)((function(){p().then((function(e){l(e.data)}))}),[]);return r.a.createElement("div",null,r.a.createElement(v,{message:F}),r.a.createElement(i,{text:"Phonebook"}),"filter shown with ",r.a.createElement("input",{value:w,onChange:function(e){C(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement("form",null,r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:s,onChange:function(e){d(e.target.value)}}),r.a.createElement("br",null),"number: ",r.a.createElement("input",{value:k,onChange:function(e){j(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(s)){if(window.confirm("".concat(s," is already added to phonebook, do you wish to update their number?"))){var n={name:s,number:k},a=t.find((function(e){return e.name===s}));void 0===a.id&&(a.id=t.length),E(a.id,n).catch((function(e){return N("Already deleted ".concat(s))})),t[a.id-1]=n,N("Added ".concat(s)),l(Object(c.a)(t))}}else{var r={name:s,number:k};b(r),l(t.concat(r)),N("Added ".concat(s)),d(""),j("")}}},"add"))),r.a.createElement(g,{persons:t,filterWord:w}))};o.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.5c102e8b.chunk.js.map